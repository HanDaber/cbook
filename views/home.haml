= haml(:'partials/_header', :layout => false)

= haml(:'partials/_nav', :layout => false)

#main-container.wrapper.clearfix.b{:role => "main"}

    %center
        #main.r8.b.clearfix
            #left.column
                .b.h
                    = haml(:'users/_info')

            #middle
                .h.column
                    %h3 My Feed
                    %br/
                    .create_post.ib
                        %form.ib{:name => "post_form", :action => "/#{@user[:name]}/post", :method => "post"}
                            %fieldset{style: "border:1px solid black;padding:0.5em 2em;"}
                                %legend{style: "font-size:13pt;"} Create a post:
                                %textarea{name: "post", cols: "40", rows: "3", style:"margin:5px;"}
                                %br/
                                %fieldset.ib.fl.checkboxes
                                    %legend{style: "font-size:13pt;"} Add some tags:
                                    %ul
                                        - i = 0
                                        - @tags.each do |tag|
                                            - i += 1
                                            %li            
                                                %label.label_check{for: "checkbox-0#{i}"}
                                                    %input{name: "tag[#{i}]", id: "tag_#{i}", value: "#{tag.name}", type: "checkbox", style: "margin-right:0.2em;"}= "#{tag.name}"

                                                / %input{type: "checkbox", name: "tag[#{i}]", value: "#{tag.name}", style: "margin-right:0.2em;"}= "#{tag.name}"
                                                
                                                
                                %br/
                                -# Totally not secure:
                                %input{:type => "hidden", :name => "pass", value: "#{session[:pass]}"}/
                                %input.btn.r4{:type => "submit", :value => "Submit", style:"margin:5px;"}/
                    %p
                        %hr{width:"50%"}/
                    %h6= "#{@posts.length}"
                    .feed-container= haml(:'partials/_posts_list')
            
            #right.column
                .b.h
                    %h3 My Net
                    %br/
                    %form.ib{:name => "tag_form", :action => "/#{@user.name}/tag", :method => "post"}
                        %fieldset{style: "padding:0.2em 0.8em;"}
                            %legend{style: "font-size:11pt;"} Create a tag:
                            %input{:type => "text", :name => "tag", :size => "8", style:"margin:2px;"}/
                            %br/
                            -# Totally not secure:
                            %input{:type => "hidden", :name => "pass", value: "#{session[:pass]}"}/
                            %input.btn.r4{:type => "submit", :value => "Submit", style:"margin:5px;"}/
                    %ul
                        - if @tags.length == 0
                            %p you have no tags yet
                        - else
                            -# = @tags.inspect
                            - @tags.each do |tag|
                                %li.home_tags
                                    %a{:href => "../#{tag.name}"}= "#{tag.name}"


= haml(:'partials/_footer', :layout => false)